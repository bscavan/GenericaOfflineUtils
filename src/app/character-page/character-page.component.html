<!-- TODO: Align these text boxes! -->
<div>
	<b>name:</b>
	<input style="width: 200px" type="text"
	[(ngModel)]="this.characterFocus.name"/>
</div>
<div>
	<b>title:</b>
	<input style="width: 200px" type="text"
	[(ngModel)]="this.characterFocus.title"/>
</div>

<div class="tooltip">
	<span class="tooltiptext tooltip">Write your character's bio here!</span>
	<table style="vertical-align: top">
		<td>
			<b>Bio:</b>
		</td>
		<td>
			<!-- TODO: Wire this up to an actual variable in the character. -->
			<textarea></textarea>
		</td>
	</table>
</div>

<div>
	<b>Race:</b>
	<select (change)="this.characterFocus.handlePrimaryRaceChange()"
	[(ngModel)]="this.characterFocus.primaryRacialJob">
		<!--TODO: Auto-select the option that is the value of this.characterFocus.primaryRacialJob! -->
		<option *ngFor="let currentRacialJob of allRacialJobs"
		[ngValue]="currentRacialJob">{{currentRacialJob.name}}</option>

		<!-- TODO: Add an empty option to this so the player can remove the primaryRacialJob... -->
	</select>

	<!-- TODO: Add support for supplemental RacialJobs -->
</div>
<!-- TODO: Add additonal "job slots" for special cases based off properties to be later
		added into RacialJob. Jobs like Toy Golem and Manabeast allow for a second racial job,
		whereas half-breed is a non-statted "job" that gives two additional slots.
		Also link the number of generated Adventuring and Crafting Job selection dropdowns
		to the values the primary race allows for.

	TODO: Add support for setting the levels the character has in each of these jobs.
	TODO: Prevent instances of BlankAdventuringJob and BlankCraftingJob from displaying their level controls here...
-->
<div *ngIf="this.characterFocus.primaryRacialJob !== undefined">
	<div>
		<b>Adventuring Jobs:</b>
		<div *ngFor="let currentJobSlot of 
		createRange(this.characterFocus.primaryRacialJob.numberOfAdventuringJobSlots); let i = index">
			<select [(ngModel)]="this.characterFocus.adventuringJobLevels[i].job"
			(change)="this.characterFocus.recalculateAttributes()">
				<option *ngFor="let x of this.allAdventuringJobs" [ngValue]="x">{{x.name}}</option>
			</select>
			<input type="number" min="0" max="{{MAX_LEVEL}}"
			[(ngModel)]="this.characterFocus.adventuringJobLevels[i].level"
			(change)="this.characterFocus.recalculateAttributes()">
			<!--
				FIXME: When rapidly clicking this input, sometimes the change
				directive is delayed until the mouse moves.
			-->
		</div>
	</div>
	
	<div>
		<b>Crafting Jobs:</b>
		<div *ngFor="let currentJobSlot of 
		createRange(this.characterFocus.primaryRacialJob.numberOfCraftingJobSlots); let i = index">
			<select [(ngModel)]="this.characterFocus.craftingJobLevels[i].job"
			(change)="this.characterFocus.recalculateAttributes()">
				<option *ngFor="let x of this.allCraftingJobs" [ngValue]="x">{{x.name}}</option>
			</select>
			<input type="number" min="0" max="{{MAX_LEVEL}}"
			[(ngModel)]="this.characterFocus.craftingJobLevels[i].level"
			(change)="this.characterFocus.recalculateAttributes()">
			<!--
				FIXME: When rapidly clicking this input, sometimes the change
				directive is delayed until the mouse moves.
			-->
		</div>
	</div>
</div>

stats:
<app-attribute-bar [characterFocus]="characterFocus"></app-attribute-bar>

<div class="tooltip">
	<button (click)="expandOptions = ! expandOptions">&#9881;</button>
	<span class="tooltiptext tooltip">Display optional controls</span>
	<!--
		FIXME: The tooltip for this button gets cut off by the left-side of the
		window.
		TODO: Just bring in an actual tooltip package.
	-->
</div>
<div *ngIf="expandOptions">
	<button (click)="this.characterFocus.recalculateAttributes()">Manually recalculate attributes</button>
	<button (click)="this.characterFocus.printFullStats()">Print attributes to console log</button>
</div>

<!-- TODO:
		Add a button for expanding and collapsing the stats sections.
-->